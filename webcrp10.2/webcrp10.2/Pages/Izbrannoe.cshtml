@page
@model webcrp10._2.Pages.IzbrannoeModel
@{
    ViewData["Title"] = "Избранное";
}
<link rel="stylesheet" type="text/css" href="~/css/STYLEizbrannoe.css">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Избранное</title>
<body>
    <style>
        .alert {
            padding: 15px;
            margin: 10px 0;
            border: 1px solid transparent;
            border-radius: 8px;
            position: fixed;
            top: 20%;
            left: 50%;
            font-size: 16px;
            transform: translateX(-50%);
            z-index: 1000;
            display: none; /* Скрываем сообщение по умолчанию */
            width: 300px; /* Уменьшаем ширину сообщения */
            background-color: rgba(0, 0, 0, 0.8); /* Полупрозрачный черный фон */
            color: #fff; /* Белый текст */
            text-align: center;
        }

        .alert-remove::before {
            content: '🗑 ';
           /*  content: '✖ '; */
            color: #fff; /* Красный цвет для ведра */
            font-weight: bold;
        }

        .header__userid {
            margin-top: 0px; /* Отступ сверху для ID */
            margin-left: 550px;
        }

            .header__userid p {
                font-size: 14px; /* Размер шрифта для ID */
                color: black; /* Цвет текста для ID */
                margin: 0; /* Убираем отступы */
            }
    </style>
    <div id="remove-message" class="alert alert-remove" role="alert">
        Элемент удален из избранного
    </div>
    <noscript>
        <div><img src="https://mc.yandex.ru/watch/49628701" style="position:absolute; left:-9999px;" alt="" /></div>
    </noscript>
    <div class="wrapper">
        <div class="head">
            <header>
                <div class="header_bottom_border">
                    <div class="content">
                        <div class="header_top">
                            <div class="row">
                                <div class="col-lg-7 col-sm-6 col-12">
                                    <a href="index2">
                                        <img class="header_logo" src="logo/logo1.png" alt="На главную" title="На главную">
                                    </a>
                                   @*  <a class="modal_phone_call red_btn modal-phone-call">
                                        Заказать автомобиль<span class="hidden-md"> сейчас</span>!
                                    </a> *@
                                </div>
                                <div class="header__user">
                                    <div class="dropdown">
                                        <button class="user__button select">
                                            <img src="ikon/user.png" alt="User" title="Аккаунт" class="user__image">
                                        </button>
                              @*           @if (Model.UserID != 0)
                                        {
                                            <div class="header__userid">
                                                <p>Ваш ID: @Model.UserID</p>
                                            </div>
                                        }
                                        else
                                        {
                                            <div class="header__userid">
                                                <p>Ваш ID не найден.</p>
                                            </div>
                                        } *@
                                        <input type="hidden" name="gender">
                                        <ul class="dropdown-menu">
                                            <li id="cabinet">Кабинет</li>
                                            <li id="zayavki">Заявки</li>
                                            <li id="bronirovania">Бронирования</li>
                                            <li id="izbrannoe">Избранное</li>
                                        @*     <li id="settings">Настройки</li> *@
                                            <li id="exit">Выйти</li>
                                            <script>
                                                document.querySelector('.user__button').addEventListener('click', function () {
                                                    document.querySelector('.dropdown').classList.toggle('active');
                                                });

                                                var cabinetLink = document.getElementById("cabinet");

                                                // Добавляем обработчик события клика
                                                cabinetLink.addEventListener('click', function () {
                                                    // Перенаправляем пользователя на страницу cabinet.html
                                                    window.location.href = "Zayavki";
                                                });
                                                var zayavkiLink = document.getElementById("zayavki");

                                                // Добавляем обработчик события клика
                                                zayavkiLink.addEventListener('click', function () {
                                                    // Перенаправляем пользователя на страницу zayavki.html
                                                    window.location.href = "Zayavki";
                                                });
                                                var bronirovaniyaLink = document.getElementById("bronirovania");

                                                // Добавляем обработчик события клика
                                                bronirovaniyaLink.addEventListener('click', function () {
                                                    // Перенаправляем пользователя на страницу bronirovaniya.html
                                                    window.location.href = "Bronirovania";
                                                });
                                                var izbrannoeLink = document.getElementById("izbrannoe");

                                                // Добавляем обработчик события клика
                                                izbrannoeLink.addEventListener('click', function () {
                                                    // Перенаправляем пользователя на страницу izbrannoe.html
                                                    window.location.href = "Izbrannoe";
                                                });
                                                var settingsLink = document.getElementById("settings");

                                                // Добавляем обработчик события клика
                                                settingsLink.addEventListener('click', function () {
                                                    // Перенаправляем пользователя на страницу settings.html
                                                    window.location.href = "Settings";
                                                });
                                                var exitLink = document.getElementById("exit");

                                                // Добавляем обработчик события клика
                                                exitLink.addEventListener('click', function () {
                                                    // Перенаправляем пользователя на страницу exit.html
                                                    window.location.href = "index";
                                                });
                                            </script>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="content">
                    <div class="header_menu container-fluid">
                        <div class="row">
                            <div class="col-md-10 col-sm-12">

                                <nav class="navbar-expand-sm">
                                    <span class="mobile_btn" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Меню">
                                        Меню
                                    </span>
                                    <div class="collapse navbar-collapse" id="navbar">
                                        <ul itemscope="" itemtype="http://www.schema.org/SiteNavigationElement" class="header_top_menu">
                                            <li itemprop="name" class="menu_item"><a itemprop="url" href="index2" class="selected">Главная</a></li>
                                            <li itemprop="name" class="menu_item"><a itemprop="url" href="Uslovia2">Условия</a></li>
                                            <li itemprop="name" class="menu_item"><a itemprop="url" href="Contact2">Контакты</a></li>

                                        </ul>
                                    </div>


                                </nav>
                            </div>

                        </div>
                    </div>
                </div>
            </header>
            <div class="bg_main">
                <div class="content">
                @*     <a href="Zayavki">
                        <h2 class="section_title active">Заявки</h2>
                    </a>
                    <a href="Bronirovania">
                        <h2 class="section_title">Бронирования</h2>
                    </a>
                    <a href="Izbrannoe">
                        <h2 class="section_title">Избранное</h2>
                    </a> *@
                
                    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
                        <div id="favorites-container" class="favorites-wrapper"></div>
          


                    </div>
                </div>
            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    let favoritesContainer = document.getElementById('favorites-container');

                    // Получаем ID текущего пользователя
                    let userId = 'current_user_id'; // Замените на реальный идентификатор пользователя

                    // Получаем избранные элементы из localStorage
                    let allFavorites = JSON.parse(localStorage.getItem('favorites')) || {};
                    let userFavorites = allFavorites[userId] || {};

                    // Проверяем, есть ли избранные элементы
                    if (Object.keys(userFavorites).length === 0) {
                        favoritesContainer.innerHTML = '<p>Нет избранных элементов.</p>';
                    } else {
                        // Отображаем каждый избранный элемент
                        for (let key in userFavorites) {
                            if (userFavorites.hasOwnProperty(key)) {
                                let itemContent = userFavorites[key];
                                let itemElement = document.createElement('div');
                                itemElement.classList.add('card');

                                // Парсим контент для создания нужной структуры
                                let parser = new DOMParser();
                                let doc = parser.parseFromString(itemContent, 'text/html');

                                // Извлекаем необходимые элементы
                                let img = doc.querySelector('.catalog_img img').outerHTML;
                                let title = doc.querySelector('h4').outerHTML;
                                let icons = doc.querySelector('.catalog_about_info').outerHTML;

                                itemElement.innerHTML = `
                                        <div class="card-img">${img}</div>
                                        <h4>${title}</h4>
                                        <div class="icons">${icons}</div>
                                        <div class="buttons">
                                            <a href="Zayavka" class="red_btn">ЗАКАЗАТЬ</a>
                                            <a href="#" class="favorite-btn" data-id="${key}">&#x2764;</a>
                                        </div>
                                    `;

                                // Добавляем элемент в начало контейнера
                                favoritesContainer.prepend(itemElement);
                            }
                        }

                        // Добавляем обработчики для кнопок удаления
                        document.querySelectorAll('.favorite-btn').forEach(function (button) {
                            button.addEventListener('click', function (event) {
                                event.preventDefault();

                                let itemId = event.target.getAttribute('data-id');

                                // Удаляем элемент из избранного
                                delete userFavorites[itemId];
                                allFavorites[userId] = userFavorites;

                                // Обновляем localStorage
                                localStorage.setItem('favorites', JSON.stringify(allFavorites));

                                // Удаляем элемент со страницы
                                event.target.closest('.card').remove();

                                // Если больше нет избранных элементов, отображаем сообщение
                                if (Object.keys(userFavorites).length === 0) {
                                    favoritesContainer.innerHTML = '<p>Нет избранных элементов.</p>';
                                }

                                // Показать сообщение об удалении
                                let messageDiv = document.getElementById('remove-message');
                                messageDiv.style.display = 'block';
                                setTimeout(function () {
                                    messageDiv.style.display = 'none';
                                }, 3000);
                            });
                        });
                    }
                });
            </script>


            <style>
                .favorites-wrapper {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 15px;
                    justify-content: flex-start; /* Выравнивание по левому краю */
                }

                .card {
                    background-color: #fff;
                    border: 1px solid #ddd;
                    border-radius: 5px;
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                    width: calc(30% - 20px); /* уменьшение ширины карточек */
                    margin: 15px;
                    text-align: center;
                    display: flex;
                    flex-direction: column;
                    justify-content: space-between;
                    padding: 20px; /* увеличим отступы по бокам */
                }

                    .card img {
                        max-width: 100%;
                        height: auto;
                        border-radius: 5px 5px 0 0;
                    }

                    .card h4 {
                        margin: 10px 0;
                        color: #000;
                    }

                    .card .icons {
                        margin: 0 100px;
                    }

                    .card .buttons {
                        display: flex;
                        justify-content: center;
                        gap: 10px;
                        align-items: center;
                        margin-top: 10px;
                    }

                .red_btn {
                    text-align: center;
                    padding: 10px;
                    border-radius: 30px;
                    text-decoration: none;
                    color: white;
                    background-color: #c73335;
                    width: auto;
                    min-width: 220px;
                }

                    .red_btn:hover {
                        background-color: black;
                    }

                .favorite-btn {
                    text-align: center;
                    padding: 10px;
                    border-radius: 30px;
                    text-decoration: none;
                    background-color: transparent;
                    border: 1px solid #c73335;
                    color: #c73335;
                    font-size: 30px; /* увеличенный размер иконки */
                    width: 45px;
                    height: 45px;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                }

                    .favorite-btn:hover {
                        background-color: #c73335;
                        color: white;
                    }
                /* Новый стиль для иконок */
                .catalog_about_info i {
                    color: dimgray; /* серый цвет */
                    font-size: 20px; /* увеличение размера */
                    margin: 0 5px; /* уменьшение отступов между иконками */
                }
            </style>

               @*   <style>
                .favorites-wrapper{
                    padding: 70px;
                }
              
                    .catalog_item {
                        border: 1px solid #e5e5e5;
                        background-color: white;
                        margin-bottom: 20px;
                        padding: 20px;
                        margin-width: 70px
                       
                    }

                    .catalog_img img {
                        max-width: 200px;
                        height: auto;
                    }

                    .catalog_tarifs h4 {
                        margin-bottom: 20px;
                    
                    }

                    .catalog_about_info {
                        text-align: center;
                        padding: 10px 0;
                    }

                        .catalog_about_info img, .catalog_about_info i {
                            font-size: 25px;
                            color: #717171;
                        }

                    .red_btn, .transparent_btn {
                        display: block;
                        width: 100%;
                        text-align: center;
                        margin-top: 10px;
                        padding: 10px;
                        border-radius: 30px;
                      
                        text-decoration: none;
                        color: white;

                    }

                    .red_btn {
                        background-color: #c73335;
                    }

                        .red_btn:hover {
                            background-color: black;
                        }

                    .transparent_btn {
                        background-color: transparent;
                        border: 1px solid #c73335;
                        color: #c73335;
                        
                    }

                        .transparent_btn:hover {
                            background-color: #c73335;
                            color: white;
                        }


      
        </style> *@
 

        </div>
        
    </div>
    </div>
</body>
